/* Base typography */
html { font-size: 100%; }
body {
  font-family: var(--t-font-body);
  font-size: var(--t-body-size);
  line-height: var(--t-body-lh);
  letter-spacing: var(--t-body-tracking);
  color: var(--color-foreground);
  background: var(--color-background);
}

/* Scheme-derived helpers (define once) */
.color-scheme {
  --surface-100: color-mix(in srgb, var(--color-background) 96%, var(--color-foreground) 4%);
  --surface-200: color-mix(in srgb, var(--color-background) 92%, var(--color-foreground) 8%);
  --divider: color-mix(in srgb, var(--color-foreground) 12%, transparent);
  --link-hover: color-mix(in srgb, var(--color-accent) 85%, var(--color-foreground) 15%);
}

/* Headings (sizes are emitted inline from theme.liquid) */
h1,h2,h3,h4,h5,h6 {
  font-family: var(--t-font-heading);
  line-height: var(--t-heading-lh);
  letter-spacing: var(--t-heading-tracking);
  margin: 0 0 0.5em 0;
}

/* Icons */
.icon { width: 1.25rem; height: 1.25rem; flex-shrink: 0; }

/* buttons */
.button{
  -webkit-appearance:none; appearance:none;
  display:inline-flex; align-items:center; justify-content:center; gap:var(--btn-gap);
  font:var(--btn-font);
  height:var(--btn-h); padding:0 var(--btn-pad-x);
  border-radius:var(--btn-radius); border:1px solid transparent;
  text-decoration:none; cursor:pointer; user-select:none;
  transition:transform .03s ease, box-shadow .2s, background-color .2s, color .2s, border-color .2s;
  background: var(--surface-bg); color: var(--text-color);
}
.button:focus-visible{ outline:none; box-shadow:var(--focus-ring); }
.button:active{ transform: translateY(1px); }
.button[disabled], .button.is-disabled{ opacity:.6; cursor:not-allowed; pointer-events:none; }

/* Primary (default: solid) */
.button--primary{
  background: var(--btn-primary-bg);
  color: var(--btn-primary-text);
  border-color: var(--btn-primary-border);
  box-shadow: var(--btn-shadow);
}
.button--primary:hover{ filter: brightness(1.04); }
.button--primary:active{ filter: brightness(.98); }

/* Secondary (default: filled subtle / outlined border) */
.button--secondary{
  background: var(--btn-secondary-bg);
  color: var(--btn-secondary-text);
  border-color: var(--btn-secondary-border);
}
.button--secondary:hover{ filter: brightness(1.02); }

/* Weight overrides via body data attribute */
body[data-btn-weight="outline"] .button--primary{
  background: transparent;
  color: var(--btn-primary-bg);
  border-color: var(--btn-primary-bg);
  box-shadow: none;
}
body[data-btn-weight="outline"] .button--primary:hover{
  background: color-mix(in srgb, var(--btn-primary-bg), #fff 92%);
}
@supports not (color-mix(in srgb, #000, #fff)){
  body[data-btn-weight="outline"] .button--primary:hover{ background: rgba(0,0,0,.04); }
}

body[data-btn-weight="ghost"] .button--primary{
  background: transparent;
  color: var(--btn-primary-bg);
  border-color: transparent;
  box-shadow: none;
}
body[data-btn-weight="ghost"] .button--primary:hover{
  background: rgba(0,0,0,.05);
}

/* Shape override via body data attribute (pill/square already set in tokens; this is just safety) */
body[data-btn-shape="pill"] .button{ border-radius: 999px; }
body[data-btn-shape="square"] .button{ border-radius: 0; }

/* Uppercase toggle */
body[data-btn-uppercase="true"] .button{ text-transform: uppercase; letter-spacing: .04em; }

/* Sizes */
.button--sm{ height: 36px; padding-inline: 12px; font-size:.875rem; }
.button--lg{ height: 52px; padding-inline: 20px; font-size:1rem; }

/* Full width helper */
.w-full{ width: 100%; }

/* Loading affordance (optional) */
.button.is-loading, .button[aria-busy="true"]{ position:relative; pointer-events:none; }
.button.is-loading::after, .button[aria-busy="true"]::after{
  content:""; position:absolute; inset-inline-end:.75rem; width:1em; height:1em;
  border-radius:50%; border:2px solid currentColor; border-top-color:transparent;
  animation: spin .8s linear infinite;
}
@keyframes spin{ to { transform: rotate(360deg); } }


/* ===========================
   Header (color-scheme based)
   =========================== */
.hdr { position: relative; z-index: 50; color: var(--color-foreground); }
.hdr__bar {
  position: relative;
  background: var(--color-header-background, var(--color-background));
  padding: calc(var(--gutter) / 2) var(--gutter);
}
.hdr__grid {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: var(--gutter);
  min-height: var(--header-height, 64px);
}
.hdr__logo { display: inline-flex; align-items: center; justify-content: center; text-decoration: none; color: inherit; }
.hdr__logo-text { font-family: var(--t-font-heading); font-size: calc(var(--t-body-size) * 1.25); }

/* Desktop nav */
.hdr__nav { display: block; }
.hdr__item { position: relative; }
.hdr__link { display: inline-block; padding: .25rem 0; text-decoration: none; color: inherit; }

/* Dropdown (simple) */
.dropdown {
  position: absolute; inset-inline-start: 0; top: 100%;
  min-width: 220px;
  background: var(--surface-200);
  border-radius: var(--radius);
  padding: .5rem;
  box-shadow: var(--elevation-2);
  display: none;
}
.hdr__item:hover > .dropdown { display: block; }

/* Mega menu */
.mega {
  position: absolute; left: 0; right: 0; top: 100%;
  background: var(--surface-200);
  border-radius: var(--radius);
  padding: 1rem;
  box-shadow: var(--elevation-2);
  display: none;
}
.hdr__item:hover > .mega { display: block; }
.mega__inner { display: grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 1rem; }
.mega__heading { font-weight: 600; display: inline-block; margin-bottom: .25rem; }
.mega__list { list-style: none; margin: 0; padding: 0; }

/* Utilities (search/account/cart) */
.hdr__utils { display: flex; align-items: center; gap: .75rem; }
.hdr__util { display: inline-flex; align-items: center; justify-content: center; text-decoration: none; color: inherit; }
.hdr__cart { position: relative; }
.hdr__cart-count {
  position: absolute; top: -6px; right: -8px;
  min-width: 18px; height: 18px; border-radius: 9px;
  background: var(--color-accent); color: var(--color-button-text, #fff);
  font-size: 11px; line-height: 18px; text-align: center; padding: 0 4px;
}

/* Announcement bar */
.hdr__announce { background: var(--color-accent); color: var(--color-button-text, #fff); font-size: 0.875rem; }
.hdr__announce .container { padding-block: .4rem; }
.hdr__announce-text { margin: 0; text-align: center; }

/* Sticky (fixed) */
.hdr--sticky{
  position: fixed; top: 0; left: 0; right: 0;
  min-height: calc(var(--header-height, 64px) + var(--announce-height, 0px));
  background: var(--color-header-background, var(--color-background));
  z-index: 60;
  box-shadow: var(--elevation-0);
  transition: box-shadow .2s ease, background .2s ease;
}
.hdr--sticky.is-scrolled { box-shadow: var(--elevation-1); }

body.has-sticky-header {
  padding-top: calc(var(--header-height, 64px) + var(--announce-height, 0px));
}

.hdr__link:hover { color: var(--link-hover); }

/* Normal / static variants (identical background) */
.hdr--normal .hdr__bar,
.hdr--static .hdr__bar { background: var(--color-header-background, var(--color-background)); }

/* Transparent (over hero) */
.hdr--transparent,
.hdr--transparent .hdr__bar { background: transparent; color: var(--color-button-text, #fff); }
.hdr--transparent .dropdown,
.hdr--transparent .mega { color: inherit; }

/* Mobile breakpoint */
.hdr__menu-btn { display: none; background: none; border: 0; align-items: center; }
@media (max-width: 999px) {
  .hdr__menu-btn { display: inline-flex; }
  .hdr__nav { display: none; }
  .hdr__grid { grid-template-columns: auto 1fr auto; }
}

/* Mobile drawer */
.mnav[hidden] { display: none; }
.mnav {
  position: fixed; inset: 0;
  background: var(--color-background);
  z-index: 60; display: grid; grid-template-rows: auto 1fr;
}
.mnav__header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 1rem var(--gutter);
  border-bottom: 1px solid var(--divider);
}
.mnav__close { background: none; border: 0; }
.mnav__body { overflow: auto; }
.mnav__menu, .mnav__submenu { list-style: none; margin: 0; padding: 0; }
.mnav__menu > li { border-bottom: 1px solid var(--divider); }
.mnav__link { display: block; padding: 1rem var(--gutter); text-decoration: none; color: inherit; }
.mnav__toggle { background: none; border: 0; padding: 1rem; float: right; }
.mnav__submenu { padding-left: 1rem; }
.mnav__submenu[hidden] { display: none; }

/* Accessibility helpers */
.sr-only {
  position: absolute; width: 1px; height: 1px; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
}

/* ===========================
   Header layout variants (desktop)
   =========================== */
@media (min-width: 1000px) {
  .hdr__logo  { grid-area: logo; }
  .hdr__nav   { grid-area: nav; }
  .hdr__utils { grid-area: utils; justify-self: end; }
  .hdr__menu-btn { display: none; } /* desktop hides burger */

  /* 1) Logo center, nav left, utils right */
  .hdr--logo_center_nav_left .hdr__grid {
    display: grid;
    grid-template-columns: minmax(0,1fr) auto minmax(0,1fr);
    grid-template-areas: "nav logo utils";
    align-items: center;
    gap: var(--gutter);
    min-height: var(--header-height, 64px);
  }
  .hdr--logo_center_nav_left .hdr__logo  { grid-area: logo;  justify-self: center; }
  .hdr--logo_center_nav_left .hdr__nav   { grid-area: nav;   justify-self: start;  min-width: 0; }
  .hdr--logo_center_nav_left .hdr__utils { grid-area: utils; justify-self: end;    min-width: 0; }
  .hdr--logo_center_nav_left .hdr__menu {
    display: flex; flex-wrap: wrap;
    gap: clamp(.5rem, 1vw, 1.25rem);
    justify-content: flex-start; min-width: 0;
  }

  /* 2) Logo left, nav centered, utils right */
  .hdr--logo_left_nav_center .hdr__grid {
    display: grid;
    grid-template-columns: auto 1fr auto;
    grid-template-areas: "logo nav utils";
    align-items: center;
    gap: var(--gutter);
    min-height: var(--header-height, 64px);
  }
  .hdr--logo_left_nav_center .hdr__menu { justify-content: center; }

  /* 3) Logo left, nav left, utils right */
  .hdr--logo_left_nav_left .hdr__grid {
    display: grid;
    grid-template-columns: auto 1fr auto;
    grid-template-areas: "logo nav utils";
    align-items: center;
    gap: var(--gutter);
    min-height: var(--header-height, 64px);
  }
  .hdr--logo_left_nav_left .hdr__menu { justify-content: flex-start; }
}

/* Single authoritative .hdr__menu */
.hdr__menu {
  display: flex;
  gap: 1.25rem;
  margin: 0;
  padding: 0;
  list-style: none;
}

/* ================================
   Cart Drawer (scheme-aware)
   ================================ */

/* Hidden via [hidden] attribute already; these help with layout when shown */
.cart-drawer {
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 80;                /* above header (50/60), below modals if any */
  display: grid;
  grid-template-columns: 1fr auto; /* overlay + panel */
}

/* Don't capture clicks until opened */
.cart-drawer { pointer-events: none; }
.cart-drawer.is-open { pointer-events: auto; }

/* Overlay */
.cart-drawer__overlay {
  background: var(--scrim, color-mix(in srgb, var(--color-foreground) 45%, transparent));
  opacity: 0;                 /* GSAP controls this */
  pointer-events: none;       /* toggled via .is-open + JS */
  will-change: opacity;
  position: fixed;
    inset: 0;
}

/* Allow overlay clicks only when open (GSAP still animates opacity) */
.cart-drawer.is-open .cart-drawer__overlay { pointer-events: auto; }



/* Panel */
.cart-drawer__panel {
  background: var(--color-surface, var(--color-background));
  color: var(--color-foreground);
  width: clamp(320px, 90vw, 460px);
  max-width: 100%;
  height: 100%;
  box-shadow: var(--elevation-3);
  border-inline-start: 1px solid var(--color-border, color-mix(in srgb, var(--color-foreground) 12%, transparent));
  /* Remove CSS transform—GSAP owns motion */
  /* transform: translateX(100%); */
  will-change: transform;
  display: grid;
  grid-template-rows: auto 1fr auto; /* header / body / footer */
margin-left: auto;
}

/* Prevent background scroll when drawer is open */
body.drawer-open { overflow: hidden; }

.cart-drawer[hidden]{
  pointer-events: none !important;
}

.cart-list{
  overflow-y: scroll;
  overflow-x: hidden;
}

/* Header */
.cart-drawer__header {
  position: sticky; top: 0; z-index: 1;
  display: flex; align-items: center; justify-content: space-between;
  gap: .5rem;
  background: inherit;
  padding: 1rem max(var(--gutter), 16px);
  border-bottom: 1px solid var(--color-border, color-mix(in srgb, var(--color-foreground) 12%, transparent));
}
.cart-drawer__header h2 {
  margin: 0;
  font: inherit;
  font-family: var(--t-font-heading);
  letter-spacing: var(--t-heading-tracking);
}

/* Close button */
.cart-drawer__close {
  appearance: none; border: 0; background: transparent; color: inherit;
  font-size: 1.25rem; line-height: 1; padding: .25rem; cursor: pointer;
  border-radius: calc(var(--radius) / 1.5);
}
.cart-drawer__close:focus { outline: 2px solid var(--focus-ring, var(--color-accent)); outline-offset: 2px; }

/* Body (line items mount here via JS) */
.cart-drawer__body {
  overflow: hidden;
  padding: 1rem max(var(--gutter), 16px);
  display: grid; gap: .75rem;
  grid-template-rows: 1fr auto auto;
}

/* Loading / empty states */
.cart-drawer__loading { color: var(--color-foreground-secondary); }
.cart-drawer__empty {
  color: var(--color-foreground-secondary);
  text-align: center;
  padding: 2rem 1rem;
}

/* Footer (sticky checkout area) */
.cart-drawer__footer {
  position: sticky; bottom: 0; z-index: 1;
  display: grid; gap: .5rem;
  padding: 1rem max(var(--gutter), 16px);
  background: inherit;
  border-top: 1px solid var(--color-border, color-mix(in srgb, var(--color-foreground) 12%, transparent));
  box-shadow: 0 -8px 16px rgb(var(--color-foreground-rgb, 0 0 0) / var(--op-05-15, .08));
}

/* Buttons: rely on your theme button tokens/classes */
.cart-drawer__footer .button { width: 100%; }

/* Item row suggestions (if you render them) */
.cart-item {
  display: grid;
  grid-template-columns: 64px 1fr auto;
  gap: .75rem;
  align-items: start;
  padding: .5rem 0;
  border-bottom: 1px solid var(--color-border, color-mix(in srgb, var(--color-foreground) 12%, transparent));
}
.cart-item__media img { width: 64px; height: 64px; object-fit: cover; border-radius: var(--radius); }
.cart-item__title { margin: 0 0 .25rem 0; font-weight: 600; }
.cart-item__meta { color: var(--color-foreground-secondary); font-size: .875rem; }
.cart-item__qty { display: inline-flex; align-items: center; gap: .25rem; }
.cart-item__price { text-align: right; white-space: nowrap; }

/* Accessibility helpers */
.cart-drawer[role="dialog"] { outline: none; }
.cart-drawer__panel:focus { outline: 2px solid var(--focus-ring, var(--color-accent)); outline-offset: -2px; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .cart-drawer__overlay,
  .cart-drawer__panel { transition: none; }
}

.cart-item__controls {
  display: flex; align-items: center; gap: .75rem; margin-top: .5rem;
}
.cart-item__qty {
  display: inline-flex; align-items: center; border: 1px solid #ddd; border-radius: 8px;
}
.qty-btn {
  appearance: none; border: 0; background: transparent; padding: .4rem .6rem; cursor: pointer;
}
.qty-input {
  width: 3.2rem; text-align: center; border: 0; padding: .35rem 0; outline: none;
}
.cart-item__remove {
  background: none; border: none; text-decoration: underline; cursor: pointer; padding: 0;
}
.drawer-open .is-busy { pointer-events: none; opacity: .7; }

.cart-actions{
  display: flex;
  gap: var(--gutter);
}



